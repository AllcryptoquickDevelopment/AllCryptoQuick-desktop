<div class="container-block without-tab-bar">

  <app-page-intro>
    <ng-container page-title>Create new Market</ng-container>
    <ng-container page-content>
      Create your Market and sell your Products on your own terms.
    </ng-container>
    <ng-container page-help>
      Your new Market will be invite-only &ndash; choose whether you want to be the only Seller on it (Storefront) or allow any member to sell (Community Markets).<br>Optional Market Promotion can help onboard new users.
    </ng-container>
  </app-page-intro>


  <form class="market-form"><!-- [formGroup]="createMarketFormGroup" -->

    <h2 class="section-title">
      Market details
    </h2>

    <mat-card class="market-details">

      <label>
        <mat-form-field class="--larger --plain" appearance="fill">
          <h3 class="label">Market name</h3>
          <input matInput placeholder="Choose a name for your Market" #name maxlength="35" required><!-- formControlName="marketName" -->
          <mat-hint align="end">{{ name.value?.length || 0 }}/35</mat-hint>
        </mat-form-field>
      </label>

      <label>
        <mat-form-field class="--larger --plain" appearance="fill">
          <h3 class="label">Market description</h3>
          <textarea matInput #description rows="4" placeholder="Describe your Market in short, so that users will know what they'll find there" maxlength="150" required></textarea><!-- formControlName="marketDescription" -->
          <mat-hint align="end">{{ description.value?.length || 0 }}/150</mat-hint>
        </mat-form-field>
      </label>

      <div class="market-image" fxLayout>
        <div id="drag-n-drop" class="drag-n-drop" fxFlex="130px">
          <input class="hide-file" type="file" accept="image/*" multiple="true" id="fileInput">
          <button mat-button color="accent" (click)="uploadPicture()" class="small">
            Upload a logo
          </button>
          <p>or drag'n'drop</p>
        </div>
        <div class="desc" fxFlex="0 1 100%">
          <h3 class="box-title">Market logo/image</h3>
          <p>Upload your Market logo/photo for customized branding</p>
          <ul>
            <li>Square format only</li>
            <li>Recommended resolution 300 Ã— 300 px</li>
            <li>Max size 2 MB</li>
          </ul>
        </div>
      </div>

    </mat-card><!-- market details -->

    <h2 class="section-title">
      Market type
    </h2>

    <mat-card fxLayout fxLayoutGap="30px" class="market-type">
      <div class="half" fxFlex="50%">
        <mat-radio-button name="market-type" value="storefront" class="larger" color="accent">
          Storefront
        </mat-radio-button>
        <p class="help-text">
          With Storefront, only you (and those you appoint) are in control of the Market &ndash; nobody else can sell on it
        </p>
      </div>
      <mat-divider [vertical]="true" fxFlex="0 0 4px" class="thicker lighter dashed"></mat-divider>
      <div class="half" fxFlex="50%">
        <mat-radio-button name="market-type" value="community-market" class="larger" color="accent">
          Community Market
        </mat-radio-button>
        <p class="help-text">
          Community Markets give all rights and permissions to all its members &ndash; everybody on the Market can sell on it
        </p>
      </div>
    </mat-card><!-- market type -->



    <h2 class="section-title">
      Market preview &ndash; Looking good!
    </h2>
    
    <!-- TODO: include "Market listing item" as it will be seen in Market browser, for preview; only remove/disable bottom action buttons -->
    <mat-expansion-panel class="market list-item no-padding">
      <mat-expansion-panel-header class="header">
        <div class="header-wrapper" fxLayout="row" fxLayoutAlign="space-between center">
          <div class="photo">
            <img src="/assets/images/placeholder_4-3.jpg">
          </div>
          <div class="info" fxFlex="1 1 100%">
            <h3 class="box-title --larger">
              <span class="name">Joined Market title</span>
            </h3>
            <div class="desc">
              <span class="tag">Community Market</span>
            </div>
          </div><!-- .meta -->
        </div>
      </mat-expansion-panel-header>
      <div class="details">
        <h2 class="section-title">Market summary</h2>
        <p class="desc">
          This is a summary/description of a joined Market. It shouldn't be very long, so it fits on this line here, so let's limit the characters in Market creation..
        </p>
      </div>
    </mat-expansion-panel><!-- .market -->


    <h2 class="section-title">
      Optional steps
    </h2>

    <mat-expansion-panel class="promote list-item no-padding">
      <mat-expansion-panel-header class="header">
        <mat-icon fontSet="partIcon" fontIcon="part-notification-speaker"></mat-icon>
        Promote in Market browser
      </mat-expansion-panel-header>
      <div class="details" fxLayout fxLayoutGap="30px">
        <div class="desc" fxFlex="60%">
          <p>
            Markets <strong>are not</strong> listed in the Market browser by default.
          </p>
          <p>
            You can promote your Market to publish it to Market browser for a few days and onboard more potential Buyers.
          </p>
          <p class="help-text">
            This fee goes back to the stakers on Particl network for their support.
          </p>
        </div>
        <div class="form" fxFlex="40%">
          <div class="subtitle">Days to promote</div>
          <mat-form-field class="full-width">
            <mat-label>Select duration</mat-label>
            <mat-select [(value)]="promoDuration">
              <mat-option>Select duration</mat-option>
              <mat-option value="1 day">1 day</mat-option>
              <mat-option value="3 days">3 days</mat-option>
              <mat-option value="5 days">5 days</mat-option>
              <mat-option value="7 days">1 week</mat-option>
            </mat-select>
          </mat-form-field>
          <table class="full-width">
            <tr>
              <th>Promo duration</th>
              <td>{{ promoDuration }}</td>
            </tr>
            <tr>
              <th>Total promo fee</th>
              <!-- FIXME: implement dynamic fee -->
              <td>2.1428 PART</td>
            </tr>
          </table>
        </div>
      </div>
    </mat-expansion-panel><!-- .promote -->


    <div class="actions" fxLayoutAlign="space-between center">
      <button mat-button>
        <mat-icon fontIcon="part-cross"></mat-icon>
        Cancel Market creation
      </button>
      <button mat-raised-button color="primary">
        <mat-icon fontIcon="part-check"></mat-icon>
        Confirm &amp; Create Market
      </button>
    </div>

  </form>

</div><!-- .container-block -->
