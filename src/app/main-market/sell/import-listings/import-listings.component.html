<div class="container-block without-tab-bar">

  <mat-horizontal-stepper [@.disabled]="true" [linear]="true" class="no-bg --stepper-above-page-title" #stepper>
    <!-- Overwrite default Stepper icons: https://material.angular.io/components/stepper/overview#overriding-icons -->
    <ng-template matStepperIcon="edit">
      <custom-icon>
        <mat-icon fontIcon="part-check"></mat-icon>
      </custom-icon>
    </ng-template>
    <ng-template matStepperIcon="done">
      <custom-icon>
        <mat-icon fontIcon="part-pen-1"></mat-icon>
      </custom-icon>
    </ng-template>



    <!-- ---------------------------------- 1. SELECT IMPORT ---------------------------------- -->

    <mat-step [completed]="stepper.selectedIndex >= 0">
      <ng-template matStepLabel>Select Import</ng-template>
      <app-page-intro>
        <ng-container page-title>Select Import</ng-container>
        <ng-container page-content>
          Already selling elsewhere? Do you want to import dozens of Products at once? We've got you covered!<br>
          Choose your preferred Product import method below, specify import settings and continue to the next step
        </ng-container>
        <ng-container page-help>
        </ng-container>
      </app-page-intro>

      <form class="stepper-content select-import">

        <div class="filter">
          <h2 class="section-title">Select import source</h2>
          <div class="radio-switcher">
            <label *ngFor="let source of importOptions">
              <input type="radio" name="option" [value]="source.value" appDebounceClick [debounceTime]="500" (debounceClick)="setImportSauce(source.value)">
              <div class="switcher-option">
                <mat-icon [fontIcon]="source.icon"></mat-icon>
                <span class="name">{{ source.title }}</span>
              </div>
            </label>
          </div><!-- .radio-switcher -->
        </div><!-- .filter-->

        <div class="import-config with-filter">

          <ng-container *ngIf="selectedImportControl.value === null">
            Hey, nothing to be selected here... use the option on the left to import something
          </ng-container>

          <ng-template importer></ng-template>
        </div><!-- .import-config -->

      </form><!-- .select-import.stepper-content -->
    </mat-step>



    <!-- ---------------------------------- 2. REVIEW IMPORT DATA ---------------------------------- -->

    <mat-step [completed]="stepper.selectedIndex >= 1">
      <ng-template matStepLabel>Review Import Data</ng-template>
      <app-page-intro>
        <ng-container page-title>Review Import Data</ng-container>
        <ng-container page-content>
          Here are the data processed from your Import &ndash; fill in the missing fields (if any) and update the rest to your liking<br>
          When satisfied, check which Products you want to Import and save them into Product templates
        </ng-container>
        <ng-container page-help>
        </ng-container>
      </app-page-intro>

      <form class="stepper-content review-import-data">
        <h2 class="section-title">2<!--{{listings.length}}--> Products found for import</h2>

        <mat-accordion><!-- *ngIf="listings.length > 0" -->
          <!-- @FIXME: why this doesn't panel have the expand animation? -->
          <mat-expansion-panel class="imported-template list-item no-padding">
            <mat-expansion-panel-header class="header">
              <div class="header-wrapper">
                <div class="photo">
                  <img src="./assets/images/placeholder_4-3.jpg"><!--img src="{{ listing?.imageCollection?.featuredImage?.medium}}"-->
                </div>
                <div class="meta" fxFlex="1 1 100%">
                  <div class="name">Imported Template title</div>
                </div>
                <div class="status-wrap" fxFlex="0 0 240px"><!-- *ngFor="let status of getStatus(listing?.status)" -->
                  <!-- @TODO: `.expired` for errors (missing fields), `.published` for non-problematic: -->
                  <div class="status expired">
                    <!-- @TODO: in case of no errors, show "ready" instead -->
                    <span class="dot"></span>2 missing fields
                  </div>
                </div>
                <div class="publish-toggle" fxFlex>
                  <!-- @TODO: if errors, uncheck & disable Publish checkbox -->
                  <mat-checkbox disabled (click)="$event.stopPropagation()" color="primary">Import</mat-checkbox>
                </div>
              </div>
            </mat-expansion-panel-header>
            <div class="detail">
              -- Add new Template component here --
            </div>
          </mat-expansion-panel><!-- .imported-template -->
          <!-- @FIXME: why this doesn't panel have the expand animation? -->
          <mat-expansion-panel class="imported-template list-item no-padding">
            <mat-expansion-panel-header class="header">
              <div class="header-wrapper">
                <div class="photo">
                  <img src="./assets/images/placeholder_4-3.jpg"><!--img src="{{ listing?.imageCollection?.featuredImage?.medium}}"-->
                </div>
                <div class="meta" fxFlex="1 1 100%">
                  <div class="name">Another Imported Template</div>
                </div>
                <div class="status-wrap" fxFlex="0 0 240px"><!-- *ngFor="let status of getStatus(listing?.status)" -->
                  <!-- @TODO: `.expired` for errors (missing fields), `.published` for non-problematic: -->
                  <div class="status published">
                    <!-- @TODO: in case of no errors, show "ready" instead -->
                    <span class="dot"></span>ready
                  </div>
                </div>
                <div class="publish-toggle" fxFlex>
                  <mat-checkbox checked="checked" (click)="$event.stopPropagation()" color="primary">Import</mat-checkbox>
                </div>
              </div>
            </mat-expansion-panel-header>
            <div class="detail">
              -- Add new Template component here --
            </div>
          </mat-expansion-panel><!-- .imported-template -->
        </mat-accordion>

        <p class="alert --boxed --warning">
          <!-- @FIXME: replace text by meaningful error message ;) -->
          <span>Ooops, some errors occured &ndash; missing fields or something, please correct them before Saving</span>
        </p>

        <div class="action-buttons" fxLayoutAlign="space-between center">
          <button mat-button matStepperPrevious>
            <mat-icon fontIcon="part-previous-single"></mat-icon>
            Back
          </button>
          <!-- @TODO: enable if at least 1 template is marked for importing -->
          <button mat-raised-button color="primary" matStepperNext>
            <mat-icon fontIcon="part-next-single"></mat-icon>
            Import &amp; Save
          </button>
        </div>

      </form><!-- .review-import-data.stepper-content -->
    </mat-step>



  </mat-horizontal-stepper>
</div><!-- .container-block -->
