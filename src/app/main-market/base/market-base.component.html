<main-layout-default>
  <ng-container ngProjectAs="menu">

    <mat-expansion-panel
      class="instance-switcher no-padding arrow-colored"
      (afterExpand)="openedIdentitySelector()"
      (afterCollapse)="closedIdentitySelector()"
    >
      <mat-expansion-panel-header class="switcher-toggle">
        <div class="item">
          <!-- TODO: offer various colors for wallets/whatever to easily tell them apart? -->
          <div class="icon">{{ currentIdentity.initial }}</div>
          <div class="name">{{ currentIdentity.displayName }}</div>
          <div class="value">{{ currentBalance }} PART</div>
        </div>
      </mat-expansion-panel-header>

      <ng-template matExpansionPanelContent>
        <div class="options">
          <a class="item" *ngFor="let identity of otherIdentities;trackBy:trackByIdentityFn" (click)="identitySelected(identity)" (keyup.enter)="identitySelected(identity)" tabindex="0">
            <div class="icon">{{ identity.initial }}</div>
            <div class="name">{{ identity.displayName }}</div>
            <div class="value">Switch Market</div>
          </a>
        </div>
      </ng-template>

    </mat-expansion-panel>

    <div class="menu-items">
      <a class="menu-item" *ngFor="let menuItem of menu;trackBy:trackByMenuFn" routerLinkActive="active" [routerLink]="menuItem.path">
        <ng-container *ngIf="menuItem.icon.length > 0">
          <mat-icon class="icon" [fontIcon]="menuItem.icon"></mat-icon>
        </ng-container>
        <span class="text">{{menuItem.text}}</span>
      </a>
    </div>

  </ng-container>


  <!-- Alpha mainnet warning -->
  <mat-card class="notification" class="alert">
    <mat-card-title class="title">
      The Particl Marketplace is still in development - use it at your own risk!
      <button class="button" mat-button color="warn" (click)="openWarningMessage()">
        <mat-icon fontIcon="part-alert"></mat-icon>
        Click here to read all the details first!
      </button>
    </mat-card-title>
  </mat-card><!-- .notification -->

  <main-topbar></main-topbar>

  <router-outlet></router-outlet>
</main-layout-default>
