<!-- Do not remove the below class it is using for test case -->
<app-header class="test-case-container">
</app-header>

<div class="container-block without-tab-bar">
  <app-page-intro>
    <ng-container page-title>Manage Bots</ng-container>
    <ng-container page-content>
      Browse available bots and enable/disable them as you need.<br>
      Particl Bots offer additional functionality for Particl Desktop, like coin exchange capabilities.
    </ng-container>
    <ng-container page-help>
    </ng-container>
  </app-page-intro>


  <div class="filter">

    <div class="section search-sorting">
      <div class="subtitle first">Search</div>
      <mat-card class="filter-card">
        <div class="icon-input search-listings">
          <input type="text" class="header-input" id="searchbar" placeholder="Search bots..."
                  [(ngModel)]="search" (keyup)="clearAndLoadPage()" (keyup.enter)="clearAndLoadPage()"
                  (keyup.escape)="search = ''; clearAndLoadPage()">
          <mat-icon fontSet="partIcon" fontIcon="part-search"></mat-icon>
        </div>
        <button mat-button class="refresh-listings" (click)="clearAndLoadPage()" matTooltip="Refresh Bots">
          <mat-icon class="icon" fontSet="partIcon" fontIcon="part-refresh"></mat-icon>
          Refresh bots
        </button>
      </mat-card>
    </div>

    <div class="section filter-by-type">
      <div class="subtitle">Filter bots</div>
      <mat-card class="filter-card">
        <mat-form-field class="full-width">
          <mat-select [(ngModel)]="type" placeholder="All bots" (selectionChange)="clearAndLoadPage()">
            <mat-option [value]="">All bots</mat-option>
            <mat-option [value]="'EXCHANGE'">Exchange</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-button-toggle type="checkbox" class="reported-only filter-button icon-only" matTooltip="{{ enabled ? 'Show all bots' : 'Show enabled bots'}}" (change)="toggleEnabled($event)">
          <mat-icon fontSet="partIcon" fontIcon="part-flag"></mat-icon>
          {{ enabled ? 'Show all bots' : 'Show enabled bots'}}
        </mat-button-toggle>
      </mat-card>
    </div>

    <!--button mat-button color="warn" class="clear-filters" (click)="clear()">
      <mat-icon fontSet="partIcon" fontIcon="part-clear-all"></mat-icon>
      Clear all filters
    </button-->

  </div><!-- .filter -->

  <!-- Do not remove the below class it is using for test case -->
  <div class="content with-filter test-case-container"
        infiniteScroll
        [infiniteScrollContainer]="pagination.infinityScrollSelector"
        [fromRoot]="true"
        (scrolled)="loadNextPage()">

    <div class="loading-container" *ngIf="isLoadingBig">
      <div class="loading-info">
        <div class="loading-image">
          <img src="./assets/particl-logo-symbol.svg">
        </div>
        <p class="title">
          Hang on, we're loading the bots
        </p>
        <p class="widget-help">
          This might take a while
        </p>
      </div>
    </div><!-- .loading-container -->

    <ng-container *ngFor="let page of pages">
      <ng-container *ngFor="let bot of page.bots">
        <mat-card class="bot">
          <app-bot-item [bot]="bot"></app-bot-item>
        </mat-card>
      </ng-container>
    </ng-container>

    <div class="no-results" *ngIf="hasEmptySearch">
      <p>
        Sorry, no matching bots found
      </p>
    </div>

    <div class="no-results" *ngIf="noMoreListings">
      <p>
        That's all folks!
      </p>
    </div>

  </div><!-- .bot-list -->
</div><!-- .container-block -->
